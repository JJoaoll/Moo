<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Analyser.Fun.FunContext.Utils</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">Moo</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2025 Moo Language Team</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Maintainer</th><td>joaoduos@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>POSIX</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>GHC2021</td></tr></table><p class="caption">Analyser.Fun.FunContext.Utils</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides utilities for managing function analysis contexts.</p><h1>Scope Management</h1><p>Functions for:</p><ul><li>Adding local variable declarations to current scope</li><li>Entering and exiting nested block scopes  </li><li>Looking up variables in the scope stack</li><li>Type checking with function context</li></ul><h1>Variable Lookup</h1><p>Variable resolution follows lexical scoping rules:</p><ol><li value="1">Search current (top) scope first</li><li value="2">Search progressively outer scopes  </li><li value="3">Fall back to global context (constants, globals)</li><li value="4">Report error if not found</li></ol><h1>Block Scope Operations</h1><ul><li><code><a href="Analyser-Fun-FunContext-Utils.html#v:addDecl" title="Analyser.Fun.FunContext.Utils">addDecl</a></code>: Add variable to current scope</li><li><code>enterScope</code>: Create new nested scope  </li><li><code>exitScope</code>: Return to parent scope</li><li><code><a href="Analyser-Fun-FunContext-Utils.html#v:findDecl" title="Analyser.Fun.FunContext.Utils">findDecl</a></code>: Look up variable in scope stack</li></ul><h1>Example Usage</h1><pre>-- Add local variable to current scope
funCtx' &lt;- addDecl &quot;x&quot; TInt funCtx

-- Enter new block scope
let blockCtx = enterScope funCtx'

-- Look up variable  
maybeType = findDecl &quot;x&quot; blockCtx
</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:checkType">checkType</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Grammar-Type.html#t:Type" title="Grammar.Type">Type</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Analyser-Error.html#t:Error" title="Analyser.Error">Error</a> ()</li><li class="src short"><a href="#v:addDecl">addDecl</a> :: <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="Grammar-Type.html#t:Type" title="Grammar.Type">Type</a> -&gt; <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Analyser-Error.html#t:Error" title="Analyser.Error">Error</a> <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a></li><li class="src short"><a href="#v:enterBlock">enterBlock</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a></li><li class="src short"><a href="#v:quitBlock">quitBlock</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a></li><li class="src short"><a href="#v:findDecl">findDecl</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Analyser-Context-Def.html#t:Decl" title="Analyser.Context.Def">Decl</a></li><li class="src short"><a href="#v:findFunDef">findFunDef</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Grammar-Program.html#t:FunDef" title="Grammar.Program">FunDef</a></li><li class="src short"><a href="#v:findTypeDef">findTypeDef</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Grammar-Type.html#t:TypeDef" title="Grammar.Type">TypeDef</a></li><li class="src short"><a href="#v:findGlobalDef">findGlobalDef</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Grammar-Program.html#t:GlobalDef" title="Grammar.Program">GlobalDef</a></li><li class="src short"><a href="#v:findConstDef">findConstDef</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Grammar-Program.html#t:ConstDef" title="Grammar.Program">ConstDef</a></li><li class="src short"><a href="#v:findConstrAndTypeDefsByName">findConstrAndTypeDefsByName</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Grammar-Type.html#t:ConstrDef" title="Grammar.Type">ConstrDef</a>, <a href="Grammar-Type.html#t:TypeDef" title="Grammar.Type">TypeDef</a>)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:checkType" class="def">checkType</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Grammar-Type.html#t:Type" title="Grammar.Type">Type</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Analyser-Error.html#t:Error" title="Analyser.Error">Error</a> () <a href="#v:checkType" class="selflink">#</a></p><div class="doc"><p>Type check within function context (same as global context checking).</p><p>Validates that types are concrete with no unbound type variables:
 * <code><a href="Grammar-Type.html#v:TVar" title="Grammar.Type">TVar</a></code>: Invalid (no unbound type variables allowed)
 * <code><a href="Grammar-Type.html#v:TData" title="Grammar.Type">TData</a></code>: Must exist with correct arity  
 * Built-in types: Always valid</p><p>Uses the global context for type definition lookup.
 concrete: &#128077;; abstract: &#128078;;</p></div></div><div class="top"><p class="src"><a id="v:addDecl" class="def">addDecl</a> :: <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="Grammar-Type.html#t:Type" title="Grammar.Type">Type</a> -&gt; <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Analyser-Error.html#t:Error" title="Analyser.Error">Error</a> <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> <a href="#v:addDecl" class="selflink">#</a></p><div class="doc"><p>Add a variable declaration to the current (top) scope.</p><p>Creates a new declaration in the innermost scope of the function context.
 Returns updated context or error if variable already exists in current scope.</p><pre>addDecl &quot;x&quot; TInt funCtx  -- Add int variable &quot;x&quot; to current scope
</pre></div></div><div class="top"><p class="src"><a id="v:enterBlock" class="def">enterBlock</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> <a href="#v:enterBlock" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:quitBlock" class="def">quitBlock</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> <a href="#v:quitBlock" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:findDecl" class="def">findDecl</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Analyser-Context-Def.html#t:Decl" title="Analyser.Context.Def">Decl</a> <a href="#v:findDecl" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:findFunDef" class="def">findFunDef</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Grammar-Program.html#t:FunDef" title="Grammar.Program">FunDef</a> <a href="#v:findFunDef" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:findTypeDef" class="def">findTypeDef</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Grammar-Type.html#t:TypeDef" title="Grammar.Type">TypeDef</a> <a href="#v:findTypeDef" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:findGlobalDef" class="def">findGlobalDef</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Grammar-Program.html#t:GlobalDef" title="Grammar.Program">GlobalDef</a> <a href="#v:findGlobalDef" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:findConstDef" class="def">findConstDef</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Grammar-Program.html#t:ConstDef" title="Grammar.Program">ConstDef</a> <a href="#v:findConstDef" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:findConstrAndTypeDefsByName" class="def">findConstrAndTypeDefsByName</a> :: <a href="Analyser-Fun-FunContext-Def.html#t:FunContext" title="Analyser.Fun.FunContext.Def">FunContext</a> -&gt; <a href="Utils.html#t:Name" title="Utils">Name</a> -&gt; <a href="${pkgroot}/../../../../3v69mx1xbrn849wahk2klw8b0ajybycz-ghc-9.8.4-doc/share/doc/ghc/html/libraries/base-4.19.2.0-c961/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Grammar-Type.html#t:ConstrDef" title="Grammar.Type">ConstrDef</a>, <a href="Grammar-Type.html#t:TypeDef" title="Grammar.Type">TypeDef</a>) <a href="#v:findConstrAndTypeDefsByName" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.30.0</p></div></body></html>